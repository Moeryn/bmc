CC=@CC@
CPPFLAGS=@DEFS@
CFLAGS=@CFLAGS@ -Wextra @SYSCFLAGS@

TTB_OBJECTS=ttb_compile.@OBJEXT@ ttb_native.@OBJEXT@ ttb_translate.@OBJEXT@ \
	charset.@OBJEXT@ dataarea.@OBJEXT@ datafile.@OBJEXT@ file.@OBJEXT@ \
	log.@OBJEXT@ queue.@OBJEXT@ unicode.@OBJEXT@
TBL2HEX_OBJECTS=$(filter-out ttb_translate.@OBJEXT@, $(TTB_OBJECTS)) \
	tbl2hex.@OBJEXT@

clean:
	rm -f *.@OBJEXT@ *.a text.auto.h tbl2hex

ttb.a: $(TTB_OBJECTS)
	$(AR) -sr $@ $(TTB_OBJECTS)

tbl2hex: $(TBL2HEX_OBJECTS)
	$(CC) -o $@ $(TBL2HEX_OBJECTS) @icu_libraries@

text.auto.h: tbl2hex
	./$< Tables/@text_table@.ttb > $@

ttb_translate.c: text.auto.h
